{% extends "base.html" %}
{% load static %}

{% block header %}
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2ed61d5271268c9c3f1b1c9cdcaee9f9"></script>
{% endblock %}

{% block content %}
<div class="row">
  <div class="col-lg-8 mx-auto">
    <div class="card shadow-sm mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">{{ group.name }}에 장소 추가</h5>
      </div>
      <div class="card-body">

        <!-- Django → JS로 넘길 값 -->
        <script>
          const groupId = {{ group.id }};
          const csrfToken = "{{ csrf_token }}";
        </script>

        <!-- 검색 방식 선택 -->
        <div class="mb-3">
          <label class="form-label d-block">검색 방식</label>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="mode" value="name" id="mode-name" checked>
            <label class="form-check-label" for="mode-name">이름으로 검색</label>
          </div>
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="mode" value="address" id="mode-address">
            <label class="form-check-label" for="mode-address">주소로 검색</label>
          </div>
        </div>

        <!-- 검색 입력 -->
        <div class="input-group mb-3">
          <input type="text" id="place-query" class="form-control" placeholder="장소 이름 또는 주소를 입력하세요">
          <button class="btn btn-outline-secondary" id="search-btn" type="button">검색</button>
        </div>

        <!-- 지도 + 검색 결과 -->
        <div class="col mb-4">
          <div class="col-md-6 mb-3">
            <div id="map" class="border rounded bg-light" style="width: 200%; height: 400px;"></div>
          </div>
          <div class="col-md-6 mb-3">
            <h6 class="mb-2">검색 결과</h6>
            <div id="search-result" class="small text-muted"></div>
          </div>
        </div>

        <!-- Place type -->
        <div class="mb-3">
          <label for="place-type" class="form-label">Place type</label>
          <select id="place-type" class="form-select">
            <option value="restaurant">식당</option>
            <option value="cafe">카페</option>
            <option value="attraction">어트랙션</option>
            <option value="shopping">쇼핑</option>
            <option value="park">공원</option>
            <option value="museum">박물관/전시</option>
            <option value="accommodation">숙소</option>
            <option value="other">기타</option>
          </select>
        </div>

        <!-- Description -->
        <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <textarea id="description"
                    class="form-control"
                    rows="4"
                    placeholder="장소에 대한 설명을 입력하세요"></textarea>
        </div>

        <!-- 저장 버튼 -->
        <div class="d-flex justify-content-end">
          <button class="btn btn-primary" id="submit-btn" type="button">저장</button>
        </div>

        <!-- 에러 메시지 -->
        <div id="error-message" class="mt-3 text-danger small"></div>
      </div>
    </div>
  </div>
</div>

<!-- 페이지 전용 JS -->
<script src="{% static 'trip/place_create.js' %}"></script>
{% endblock %}
